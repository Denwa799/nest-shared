{"version":3,"file":"decorators.js","sourceRoot":"","sources":["../src/decorators.ts"],"names":[],"mappings":"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","sourcesContent":["import { applyDecorators } from '@nestjs/common';\nimport { Field, Float, Int } from '@nestjs/graphql';\nimport { ApiProperty as SwaggerApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport {\n  ArrayMaxSize,\n  ArrayMinSize,\n  ArrayNotEmpty,\n  ArrayUnique,\n  IsArray,\n  IsBoolean,\n  IsDate,\n  IsEmail,\n  IsEnum,\n  IsInt,\n  IsJSON,\n  IsJWT,\n  IsLatitude,\n  IsLongitude,\n  IsMobilePhone,\n  IsNegative,\n  IsNumber,\n  IsOptional,\n  IsPhoneNumber,\n  IsPositive,\n  IsString,\n  IsStrongPassword,\n  IsUrl,\n  IsUUID,\n  Max,\n  MaxLength,\n  Min,\n  MinLength,\n} from 'class-validator';\n\nexport const ApiProperty = ({\n  type,\n  enumObject,\n  min,\n  max,\n  arrayMinSize,\n  arrayMaxSize,\n  example,\n  description,\n  isOptional = false,\n  isUUID = false,\n  isArray = false,\n  isJson = false,\n  isJWT = false,\n  isUrl = false,\n  isPositive = false,\n  isNegative = false,\n  isEmail = false,\n  isMobilePhone = false,\n  isPhoneNumber = false,\n  isLatitude = false,\n  isLongitude = false,\n  isStrongPassword = false,\n  isArrayNotEmpty = false,\n  isArrayUnique = false,\n}: {\n  type: 'string' | 'int' | 'float' | 'date' | 'boolean';\n  enumObject?: object;\n  min?: number;\n  max?: number;\n  arrayMinSize?: number;\n  arrayMaxSize?: number;\n  example?: string;\n  description?: string;\n  isOptional?: boolean;\n  isUUID?: boolean;\n  isArray?: boolean;\n  isJson?: boolean;\n  isJWT?: boolean;\n  isUrl?: boolean;\n  isPositive?: boolean;\n  isNegative?: boolean;\n  isEmail?: boolean;\n  isMobilePhone?: boolean;\n  isPhoneNumber?: boolean;\n  isLatitude?: boolean;\n  isLongitude?: boolean;\n  isStrongPassword?: boolean;\n  isArrayNotEmpty?: boolean;\n  isArrayUnique?: boolean;\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\n}): (<TFunction extends Function, Y>(\n  target: TFunction | object,\n  propertyKey?: string | symbol,\n  descriptor?: TypedPropertyDescriptor<Y>,\n) => void) => {\n  const decorators = [];\n\n  if (isOptional) {\n    decorators.push(\n      ApiPropertyOptional({\n        example,\n        description,\n      }),\n    );\n  } else {\n    decorators.push(SwaggerApiProperty({ example, description }));\n  }\n\n  switch (type) {\n    case 'int':\n      decorators.push(Field(() => (isArray ? [Int] : Int), { nullable: isOptional }));\n\n      if (isOptional) decorators.push(IsOptional());\n\n      if (isArray) {\n        decorators.push(IsArray());\n        if (isArrayNotEmpty) decorators.push(ArrayNotEmpty());\n        if (isArrayUnique) decorators.push(ArrayUnique());\n        if (arrayMinSize) decorators.push(ArrayMinSize(arrayMinSize));\n        if (arrayMaxSize) decorators.push(ArrayMaxSize(arrayMaxSize));\n      }\n\n      decorators.push(IsNumber());\n      decorators.push(IsInt());\n\n      if (min) decorators.push(Min(min, { each: isArray }));\n      if (max) decorators.push(Max(max, { each: isArray }));\n\n      break;\n    case 'float':\n      decorators.push(Field(() => (isArray ? [Float] : Float), { nullable: isOptional }));\n\n      if (isOptional) decorators.push(IsOptional());\n\n      if (isArray) {\n        decorators.push(IsArray());\n        if (isArrayNotEmpty) decorators.push(ArrayNotEmpty());\n        if (isArrayUnique) decorators.push(ArrayUnique());\n        if (arrayMinSize) decorators.push(ArrayMinSize(arrayMinSize));\n        if (arrayMaxSize) decorators.push(ArrayMaxSize(arrayMaxSize));\n      }\n\n      decorators.push(IsNumber());\n\n      if (min) decorators.push(Min(min, { each: isArray }));\n      if (max) decorators.push(Max(max, { each: isArray }));\n\n      break;\n    case 'date':\n      decorators.push(Field(() => (isArray ? [Date] : Date), { nullable: isOptional }));\n\n      if (isOptional) decorators.push(IsOptional());\n\n      if (isArray) {\n        decorators.push(IsArray());\n        if (isArrayNotEmpty) decorators.push(ArrayNotEmpty());\n        if (isArrayUnique) decorators.push(ArrayUnique());\n        if (arrayMinSize) decorators.push(ArrayMinSize(arrayMinSize));\n        if (arrayMaxSize) decorators.push(ArrayMaxSize(arrayMaxSize));\n      }\n\n      decorators.push(IsDate({ each: isArray }));\n      break;\n    case 'boolean':\n      decorators.push(Field({ nullable: isOptional }));\n      if (isOptional) decorators.push(IsOptional());\n      decorators.push(IsBoolean());\n      break;\n    case 'string':\n    default:\n      if (enumObject) {\n        decorators.push(\n          Field(() => (isArray ? [enumObject] : enumObject), { nullable: isOptional }),\n        );\n      } else {\n        decorators.push(Field(() => (isArray ? [String] : String), { nullable: isOptional }));\n      }\n\n      if (isOptional) decorators.push(IsOptional());\n\n      if (isArray) {\n        decorators.push(IsArray());\n        if (isArrayNotEmpty) decorators.push(ArrayNotEmpty());\n        if (isArrayUnique) decorators.push(ArrayUnique());\n        if (arrayMinSize) decorators.push(ArrayMinSize(arrayMinSize));\n        if (arrayMaxSize) decorators.push(ArrayMaxSize(arrayMaxSize));\n      }\n\n      decorators.push(IsString({ each: isArray }));\n\n      if (isUUID) decorators.push(IsUUID());\n      if (isEmail) decorators.push(IsEmail());\n      if (isMobilePhone) decorators.push(IsMobilePhone());\n      if (isPhoneNumber) decorators.push(IsPhoneNumber());\n      if (isPositive) decorators.push(IsPositive());\n      if (isNegative) decorators.push(IsNegative());\n      if (min) decorators.push(MinLength(min, { each: isArray }));\n      if (max) decorators.push(MaxLength(max, { each: isArray }));\n      if (enumObject) decorators.push(IsEnum(enumObject, { each: isArray }));\n      if (isJson) decorators.push(IsJSON());\n      if (isJWT) decorators.push(IsJWT());\n      if (isUrl) decorators.push(IsUrl());\n      if (isLatitude) decorators.push(IsLatitude());\n      if (isLongitude) decorators.push(IsLongitude());\n      if (isStrongPassword) decorators.push(IsStrongPassword());\n  }\n\n  return applyDecorators(...decorators);\n};\n"]}